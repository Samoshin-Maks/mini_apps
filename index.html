<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ö—Ç–æ —Ç—ã –∏–∑ –∞–Ω–∏–º–µ?</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: Arial, sans-serif;
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
    }
    button {
      width: 100%;
      padding: 15px;
      margin: 10px 0;
      background: black;
      border: 2px solid white;
      color: white;
      font-size: 18px;
      cursor: pointer;
      border-radius: 8px;
    }
    button:hover {
      background: white;
      color: black;
    }
    h1 {
      text-align: center;
    }
  </style>
</head>
<body>
  <h1 id="header">–ü—Ä–∏–≤–µ—Ç!</h1>
  <div id="question-container"></div>
  <button id="next-btn" style="display:none;">–î–∞–ª–µ–µ</button>
  <button id="restart-btn" style="display:none;">–ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const questions = [
      {
        text: "–ö–∞–∫–æ–π –∂–∞–Ω—Ä –∞–Ω–∏–º–µ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
        options: ["–≠–∫—à–µ–Ω", "–†–æ–º–∞–Ω—Ç–∏–∫–∞", "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞", "–î—Ä–∞–º–∞"]
      },
      {
        text: "–ö–∞–∫–æ–π —Ç–∏–ø –≥–µ—Ä–æ—è —Ç–µ–±–µ –±–ª–∏–∂–µ?",
        options: ["–°–∏–ª—å–Ω—ã–π –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã–π", "–î–æ–±—Ä—ã–π –∏ –∑–∞–±–æ—Ç–ª–∏–≤—ã–π", "–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ –∑–∞–≥–∞–¥–æ—á–Ω—ã–π", "–í–µ—Å—ë–ª—ã–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π"]
      },
      {
        text: "–ß—Ç–æ —Ç—ã —Ü–µ–Ω–∏—à—å –≤ –¥—Ä—É–∑—å—è—Ö?",
        options: ["–í–µ—Ä–Ω–æ—Å—Ç—å", "–í–µ—Å–µ–ª—å–µ", "–†–∞–∑—É–º", "–°–∏–ª–∞ –¥—É—Ö–∞"]
      }
    ];

    const scoresMap = {
      "–≠–∫—à–µ–Ω": {"Edward": 2, "Midoriya": 1, "Light": 0, "Tokyo": 0},
      "–†–æ–º–∞–Ω—Ç–∏–∫–∞": {"Edward": 0, "Midoriya": 2, "Light": 1, "Tokyo": 0},
      "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞": {"Edward": 0, "Midoriya": 0, "Light": 2, "Tokyo": 1},
      "–î—Ä–∞–º–∞": {"Edward": 0, "Midoriya": 0, "Light": 1, "Tokyo": 2},

      "–°–∏–ª—å–Ω—ã–π –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã–π": {"Edward": 2, "Midoriya": 1, "Light": 0, "Tokyo": 0},
      "–î–æ–±—Ä—ã–π –∏ –∑–∞–±–æ—Ç–ª–∏–≤—ã–π": {"Edward": 0, "Midoriya": 2, "Light": 0, "Tokyo": 1},
      "–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ –∑–∞–≥–∞–¥–æ—á–Ω—ã–π": {"Edward": 0, "Midoriya": 0, "Light": 2, "Tokyo": 1},
      "–í–µ—Å—ë–ª—ã–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π": {"Edward": 1, "Midoriya": 1, "Light": 0, "Tokyo": 0},

      "–í–µ—Ä–Ω–æ—Å—Ç—å": {"Edward": 2, "Midoriya": 1, "Light": 0, "Tokyo": 1},
      "–í–µ—Å–µ–ª—å–µ": {"Edward": 0, "Midoriya": 2, "Light": 0, "Tokyo": 1},
      "–†–∞–∑—É–º": {"Edward": 0, "Midoriya": 0, "Light": 2, "Tokyo": 0},
      "–°–∏–ª–∞ –¥—É—Ö–∞": {"Edward": 1, "Midoriya": 0, "Light": 0, "Tokyo": 2}
    };

    const results = {
      "Edward": "–≠–¥–≤–∞—Ä–¥ –≠–ª—Ä–∏–∫ (Fullmetal Alchemist) ‚Äî —Å–∏–ª—å–Ω—ã–π –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã–π –≥–µ—Ä–æ–π.",
      "Midoriya": "–ú–∏–¥–æ—Ä–∏—è –ò–∑—É–∫—É (My Hero Academia) ‚Äî –¥–æ–±—Ä—ã–π –∏ —Ü–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª—ë–Ω–Ω—ã–π.",
      "Light": "–õ–∞–π—Ç –Ø–≥–∞–º–∏ (Death Note) ‚Äî —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ —É–º–Ω—ã–π.",
      "Tokyo": "–¢–æ–∫–∏–æ (Tokyo Ghoul) ‚Äî –≥–ª—É–±–æ–∫–∏–π –∏ —Å–ª–æ–∂–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂."
    };

    let currentQuestion = 0;
    let scores = {"Edward": 0, "Midoriya": 0, "Light": 0, "Tokyo": 0};

    const header = document.getElementById('header');
    const container = document.getElementById('question-container');
    const nextBtn = document.getElementById('next-btn');
    const restartBtn = document.getElementById('restart-btn');

    function showQuestion() {
      container.innerHTML = "";
      const q = questions[currentQuestion];
      const questionEl = document.createElement('h2');
      questionEl.textContent = q.text;
      container.appendChild(questionEl);

      q.options.forEach(option => {
        const btn = document.createElement('button');
        btn.textContent = option;
        btn.onclick = () => {
          // –°—á–∏—Ç–∞–µ–º –æ—á–∫–∏
          const charsScores = scoresMap[option];
          for (const char in charsScores) {
            scores[char] += charsScores[char];
          }
          nextBtn.style.display = "inline-block";
          // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, —á—Ç–æ–±—ã –Ω–µ–ª—å–∑—è –±—ã–ª–æ –≤—ã–±—Ä–∞—Ç—å –≤—Ç–æ—Ä–æ–π
          [...container.querySelectorAll('button')].forEach(b => b.disabled = true);
          btn.disabled = false;
        };
        container.appendChild(btn);
      });
      nextBtn.style.display = "none";
    }

    nextBtn.onclick = () => {
      currentQuestion++;
      if (currentQuestion < questions.length) {
        showQuestion();
      } else {
        showResult();
      }
      nextBtn.style.display = "none";
    };

    restartBtn.onclick = () => {
      currentQuestion = 0;
      scores = {"Edward": 0, "Midoriya": 0, "Light": 0, "Tokyo": 0};
      header.textContent = "–ü—Ä–∏–≤–µ—Ç!";
      restartBtn.style.display = "none";
      showQuestion();
    };

    function showResult() {
      const maxChar = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
      header.textContent = "–ü—Ä–∏–≤–µ—Ç, " + tg.initDataUnsafe.user?.first_name + "!";
      container.innerHTML = `<h2>üéâ –¢–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂:</h2><p>${results[maxChar]}</p>`;
      nextBtn.style.display = "none";
      restartBtn.style.display = "inline-block";
      // –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–æ—Ç—É, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:
      // tg.sendData(JSON.stringify({result: maxChar}));
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    showQuestion();
  </script>
</body>
</html>

